{% assign metafield_value = product.metafields[block.settings.metafield_namespace][block.settings.metafield_key] %}

{% if metafield_value != blank %}
  <div class='w-1/3 border border-t-line-break'>
    <div class='relative h-[120px] flex items-end justify-start p-[13.5px]'>
      <h3 class='text-[34px] text-p-lightest'>{{ block.settings.title }}</h3>
      {% capture sizes %}(min-width: 1100px) 100vw, (min-width: 750px) 50vw{% endcapture %}
      {% assign preload = true %}
      {% if section.index > 2 %}
        {% assign preload = false %}
      {% endif %}
      {% render 'image',
        image: block.settings.banner_image,
        sizes: sizes,
        widths: '600, 900, 1100, 1440, 2180',
        preload: preload,
        class: 'absolute inset-0 w-full h-full -z-10'
      %}
    </div>
    <ul class='list-disc list-inside py-[17px] px-[23.5px] flex flex-col gap-[10px]'>
      {{ metafield_value }}
    </ul>
  </div>
{% endif %}

{% schema %}
{
  "name": "Metafield Column",
  "settings": [
    {
      "type": "image_picker",
      "id": "banner_image",
      "label": "Banner Image"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title"
    },
    {
      "type": "text",
      "id": "metafield_namespace",
      "label": "Metafield Namespace"
    },
    {
      "type": "text",
      "id": "metafield_key",
      "label": "Metafield Key"
    }
  ],
  "presets": [
    {
      "name": "Metafield Column"
    }
  ]
}
{% endschema %}
