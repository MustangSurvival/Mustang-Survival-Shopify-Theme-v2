<!doctype html>
<html class='no-js' lang='{{ request.locale.iso_code }}'>
  <head>
    {%- render 'speculation-rules' -%}
    {{ 'icons.svg' | asset_url | preload_tag: as: 'image', type: 'image/svg+xml', crossorigin: 'anonymous' }}
    <meta charset='utf-8' data-svg-sprite-path='{{ 'icons.svg' | asset_url }}'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width,initial-scale=1'>
    <meta name='theme-color' content=''>
    <link rel='canonical' href='{{ canonical_url }}'>

    <style>
      [cloak] {
        display: none !important;
      }
    </style>

    {%- render 'preconnect' -%}

    {%- if settings.favicon != blank -%}
      <link
        rel='icon'
        type='image/png'
        href='{{ settings.favicon | image_url: width: 32, height: 32 }}'
      >
    {%- endif -%}

    {%- render '@head-fonts' -%}

    <title>{{ page_title }}</title>

    {% if page_description %}
      <meta name='description' content='{{ page_description | escape }}'>
    {% endif %}

    {%- liquid
      render 'meta-tags'
      render 'seo-schema'
    -%}

    {{ content_for_header }}

    {%- capture global_css -%}
      {{ '-global.css' | asset_url | stylesheet_tag: preload: true }}
    {%- endcapture -%}

    {% comment %} Adding crossorigin so CSSRules injections works for ShadowDOM on Gift Card Domain and Admin {% endcomment %}
    {{ global_css | replace: '<link', '<link id="main-stylesheet" crossorigin="anonymous"' }}

    {%- render '@head-scripts' -%}

    {% comment %} Yotpo Widget {% endcomment %}
    <script type='text/javascript'>
      ;(function e() {
        function loadYotpo() {
          var e = document.createElement('script')
          ;(e.type = 'text/javascript'),
            (e.async = true),
            (e.src = '//staticw2.yotpo.com/wL1ztZ2e9kD1np3xf8sR2LlCFanNfJ3YxMUE4oWk/widget.js')
          var t = document.getElementsByTagName('script')[0]
          t.parentNode.insertBefore(e, t)
        }

        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', loadYotpo)
        } else {
          loadYotpo()
        }
      })()
    </script>
  </head>

  <body class='template-{{- template -}}'>
    {%- capture body_content -%}
      <app-provider>
        {%- render '@needs-script', entries: 'core-aria-live-region' -%}
        <aria-live-region></aria-live-region>
        <a class='sr-only skip-to-content-link' href='#main'>
          {{ 'accessibility.skip_to_text' | t }}
        </a>

        <main-header id='main-header' class='sticky top-0 grid w-full grid-cols-1 z-50'>
          {%- sections 'header-group' -%}
        </main-header>

        <main
          id='main'
          class='content-for-layout focus-none grid grid-cols-1'
          role='main'
          tabindex='-1'
        >
          {{ content_for_layout }}
        </main>

        <footer id='main-footer'>
          {%- sections 'footer-group' -%}
        </footer>

        <ul hidden>
          <li id='a11y-refresh-page-message'>
            {{ 'accessibility.refresh_page' | t }}
          </li>
        </ul>
        {%- unless template.name == 'cart' -%}
          {%- render 'cart-drawer-dialog' -%}
        {%- endunless -%}

        {% render 'quickshop' %}
      </app-provider>
    {%- endcapture -%}
    {{- body_content -}}
    {%- render '@body-scripts', content: body_content -%}
    {% if settings.klaviyo_personalisation_enable %}
      {%- render 'klaviyo-lists' -%}
    {% endif %}
  </body>
</html>
