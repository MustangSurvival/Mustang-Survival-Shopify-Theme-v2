<script defer type='module' src='{{ '-global.js' | asset_url }}'></script>
<script defer type='module' src='{{ '-app-provider.js' | asset_url }}'></script>
<script defer type='module' src='{{ '-core-icon.js' | asset_url }}'></script>
<script defer type='module' src='{{ '-main-header.js' | asset_url }}'></script>

<script>
  document.documentElement.className = document.documentElement.className.replace('no-js', 'js')
</script>

<script>
  window.routes = {
    cart_add_url: '{{ routes.cart_add_url }}',
    cart_change_url: '{{ routes.cart_change_url }}',
    cart_update_url: '{{ routes.cart_update_url }}',
    predictive_search_url: '{{ routes.predictive_search_url }}',
  }

  window.cartStrings = {
    error: `{{ 'sections.cart.cart_error' | t }}`,
    quantityError: `{{ 'sections.cart.cart_quantity_error_html' | t }}`,
  }

  window.variantStrings = {
    addToCart: `{{ 'products.product.add_to_cart' | t }}`,
    soldOut: `{{ 'products.product.sold_out' | t }}`,
    unavailable: `{{ 'products.product.unavailable' | t }}`,
  }
</script>

<script>
  window.__STOREFRONT_ACCESS_TOKEN__ = '{{ settings.storefront_access_token }}'
  window.__CART__ = {{ cart | json }}
  window.__VENDORS__ = {
    nosto: {
      enabled: {{ settings.nosto_enable | json }} ?? false
    },
  }
</script>

{% if shop.domain == 'mustangsurvival.com' or shop.domain == 'mustangsurvival.ca' or shop.domain contains 'dev' %}
  {% comment %} Klarna Install Scripts {% endcomment %}
  <script>
    window.KlarnaThemeGlobals={};{%case template.name%} {%when"product"%} window.KlarnaThemeGlobals.data_purchase_amount={{product.first_available_variant.price}};window.KlarnaThemeGlobals.productVariants={{product.variants|json}};window.KlarnaThemeGlobals.documentCopy=document.cloneNode(true);{%when"cart"%} window.KlarnaThemeGlobals.data_purchase_amount={{cart.total_price}};window.KlarnaThemeGlobals.documentCopy=document.cloneNode(true);{%endcase%}
  </script>

  {% comment %} Klarna On-site Messaging {% endcomment %}
  <script>
    window.KlarnaOnsiteService = window.KlarnaOnsiteService || []
    window.KlarnaOnsiteService.push({ eventName: 'refresh-placements' })
  </script>
{% endif %}
