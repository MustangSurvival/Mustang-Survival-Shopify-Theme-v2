{%- comment -%}
  Render an accordion item with a title and content.

  Accepts:
    - id (string): Unique identifier for the accordion item.
    - title (string): Title of the accordion item.
    - content (string): Content of the accordion item.
    - group_name (string): Name of the group the accordion item belongs to.
    - connected (boolean): Whether the accordion item is connected to other items in the group.
    - rte (boolean): Whether the content is rich text.
    - open (boolean): Whether the accordion item should be open by default.

  Behavior:
    - If no group_name is provided, the group_name will default to 'accordion'.
    - If connected is true, the accordion item will be a radio button instead of a checkbox, so only one item in the group can be open at a time.
{%- endcomment -%}

{%- assign group_name = group_name -%}
{%- assign connected = connected | default: false, allow_false: true -%}
{%- assign rte = rte | default: true, allow_false: true -%}
{%- assign open = open | default: false, allow_false: true -%}

{%- if group_name == blank -%}
  {%- capture group_name -%}
    accordion-input--{{ id | handleize }}
  {%- endcapture -%}
{%- endif -%}

<div id='Details-{{ id }}' class='group'>
  <label class='list-none cursor-pointer' for='accordion-checkbox-{{ id }}'>
    <input
      aria-controls='accordion-content-{{ id }}'
      aria-label='{{ 'accessibility.accordion_toggle' | t: title: title }}'
      class='sr-only peer'
      type='{% if connected %}radio{% else %}checkbox{% endif %}'
      id='accordion-checkbox-{{ id }}'
      name='{{ group_name | default: 'accordion' }}'
      {% if open %}checked{% endif %}
    >
    <div class='flex gap-[10px] items-center w-full peer-focus-visible:ring-1 ring-u-focus {{ container_classes }}'>
      {% if alternate_layout %}
        {%- render 'icon' with 'c-icon-caret',
          size: 10,
          class: 'group-has-[:checked]:rotate-180 duration-300 transition-transform relative bottom-px'
        -%}
      {% endif %}
      <h2 class='{% if alternate_layout %}text-body font-[500] text-[16px]{% else %}h6 text-[24px] leading-[40px]{% endif %} {{ title_classes }}' id='accordion-title-{{ id }}'>
        {{ title }}
      </h2>
      {% unless alternate_layout %}
        {%- render 'icon' with 'c-icon-caret',
          size: 10,
          class: 'group-has-[:checked]:rotate-180 duration-300 transition-transform relative bottom-px'
        -%}
      {% endunless %}
    </div>
  </label>
  <div
    class='{% if rte %}rte{% endif %} group-has-[:checked]:grid-rows-[1fr] group-has-[:checked]:visible grid-rows-[0fr] transition-[visiblity,grid-template-rows] duration-300 grid invisible'
    id='accordion-content-{{ id }}'
    role='region'
    aria-labelledby='accordion-title-{{ id }}'
  >
    <div class='overflow-hidden'>
      <div class='pt-xs'>
        {{ content }}
      </div>
    </div>
  </div>
</div>
