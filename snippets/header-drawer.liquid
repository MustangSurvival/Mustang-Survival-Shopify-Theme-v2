{% comment %}
  Snippet: header-drawer.liquid
  Renders a header drawer menu for mobile using the regular menu blocks.
{% endcomment %}

<div id='menu-drawer' class='mt-[14px] grid grid-cols-1 min-h-full grid-rows-[auto_auto_1fr_auto] pb-sm gap-y-sm'>
  {% comment %} 1. Main Navigation {% endcomment %}
  <nav>
    <ul class='list-none px-[30px] grid grid-cols-1 gap-y-sm' role='list'>
      {%- for block in section.blocks -%}
        {%- if block.type == 'menu_item' -%}
          {% assign menu_1 = linklists[block.settings.menu_1] %}
          {% assign menu_2 = linklists[block.settings.menu_2] %}
          {% assign menu_3 = linklists[block.settings.menu_3] %}

          <li class='list-none'>
            {% if menu_1 != blank or menu_2 != blank or menu_3 != blank %}
              {% capture block_menu %}
                <ul class='list-none !p-0 m-0 ml-[15px] gap-[2px]'>
                  {% if menu_1 != blank %}
                    <li class='list-none h6 text-[25px] leading-[26px] !mt-0' aria-disabled>
                      {{ menu_1.title }}
                    </li>
                    {%- render 'menu-block-item' menu: menu_1 %}
                  {% endif %}
                  {% if menu_2 != blank %}
                    <li class='list-none h6 text-[25px] leading-[26px] mb-0 !mt-[25px]' aria-disabled>
                      {{ menu_2.title }}
                    </li>
                    {%- render 'menu-block-item' menu: menu_2 %}
                  {% endif %}
                  {% if menu_3 != blank %}
                    <li class='list-none h6 text-[25px] leading-[26px] mb-0 !mt-[25px]' aria-disabled>
                      {{ menu_3.title }}
                    </li>
                    {%- render 'menu-block-item' menu: menu_3 %}
                  {% endif %}
                </ul>
              {% endcapture %}
              {%- assign block_nav_id = 'block-nav-id-' | append: block.id %}
              {%- render 'accordion-item',
                id: block_nav_id,
                title: block.settings.top_label,
                content: block_menu
              -%}
            {% else %}
              <a
                id='HeaderDrawer-{{ block.id }}'
                href='{{ block.settings.link }}'
                class='block text-[24px] leading-[40px] h6 {% if block.settings.link == blank %}cursor-default{% endif %}'
                {% if block.settings.link == blank %}aria-disabled='true'{% endif %}
              >
                {{ block.settings.top_label | escape }}
              </a>
            {% endif %}
          </li>
        {%- endif -%}
      {%- endfor -%}
    </ul>
  </nav>

  {% comment %} 2. Additional Mobile Links (from Blocks) {% endcomment %}
  {%- comment -%}
  {%- assign mobile_link_blocks = section.blocks | where: 'type', 'mobile_link' -%}
  {%- if mobile_link_blocks.size > 0 -%}
    <div class='px-sm mt-sm border-t border-p-border pt-sm'>
      <ul class='list-none grid grid-cols-1 gap-y-sm' role='list'>
        {%- for block in mobile_link_blocks -%}
          {%- if block.settings.link != blank and block.settings.text != blank -%}
            <li class='list-none'>
              <a href='{{ block.settings.link }}' class='flex items-center gap-xs text-base hover:underline'>
                {%- if block.settings.icon != blank -%}
                  {% render 'icon' with block.settings.icon, size: 20 %}
                {%- else -%}
                  <span class='w-[20px] h-[20px] inline-block'></span>
                {%- endif -%}
                <span>{{ block.settings.text | escape }}</span>
              </a>
            </li>
          {%- endif -%}
        {%- endfor -%}
      </ul>
    </div>
  {%- endif -%}
  {%- endcomment -%}

  {%- liquid
    if section.settings.enable_country_selector and localization.available_countries.size > 1
      render 'i18n-select', type: 'country'
    endif

    if section.settings.enable_language_selector and localization.available_languages.size > 1
      render 'i18n-select', type: 'language'
    endif
  -%}
</div>